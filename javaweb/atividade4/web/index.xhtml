<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>atividade4</title>
    </h:head>
    <h:body>
    <h:form>
          <p:toolbar>
              <p:toolbarGroup align="right">
                  <p:commandButton value="salvar"/>
              </p:toolbarGroup>
          </p:toolbar>
            <h:panelGrid columns="2">
                <p:outputLabel value="Numero" for="numero"/>
                <p:inputText id="numero" value="#{bean.nota.numero}"/>
                <p:outputLabel value="Cliente" for="cliente"/>
                <p:inputText id="cliente" value="#{bean.nota.cliente}" />
              <p:outputLabel value="CPF" for="cpf"/>
                <p:inputMask  mask="333.333.333-33" id="cpf" value="#{bean.nota.cpf}" />
            </h:panelGrid>
          
                <p:commandButton value="+" oncomplete="PF('itemDialog').show()"/>
                                
            
            
            <p:dataTable var="i" id="tabela" value="#{bean.intens}"
                         emptyMessage="Nenhum item Cadastrado">
                         
               <p:column headerText="Descriçao">
                    <h:outputLabel value="#{i.descricao}"/>
                </p:column>
            
                <p:column headerText="Tipo">
                    <h:outputLabel value="#{i.tipo}"/>
                </p:column>
            
                <p:column headerText="Valor">
                    <h:outputLabel value="#{i.valor}"/>
                </p:column>
                
                
            </p:dataTable>
            
            
          
            
             <p:dialog widgetVar="itemDialog" header="Novo Item"
                      resizable="false" style="min-width: 300px">

                <h:panelGroup id ="itemPanel" >
                    
                    <p:panelGrid columns="2">
                        <p:outputLabel value="Descrição"/>
                        <p:inputText value="#{bean.item.descricao}"/>
                        
                        
                        <p:outputLabel value="Tipo" />
                        <p:selectOneMenu  value="#{bean.item.tipo}" >
                            <f:selectItem itemLabel="Selecione" itemValue=""/>
                            <f:selectItem itemLabel="Produto" itemValue="Produto"/>
                            <f:selectItem itemLabel="Serviço" itemValue="Servico"/>
                        </p:selectOneMenu>

                        <p:outputLabel value="Valor"/>
                        <p:inputText value="#{bean.item.valor}"/>
                        
                        <p:commandButton value="Adicionar"
                                         action="#{bean.adicionarItem()}"  
                                         update = "tabela itemPanel"
                                         process = "itemPanel" />
                    </p:panelGrid>
                </h:panelGroup>
                
            </p:dialog>
            <!-- final da dialog-->
        </h:form>
    </h:body>
</html>